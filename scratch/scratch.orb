module Orb::Core::Types {
    type Unit
}

module Orb::Core::Booleans {
    type Bool {
        constructor True
        constructor False
    }
}

module M with Orb::Core::* {
    type State of on, off

    fun (self State) flip () (State) = .on

    fun (Unit) main () () {
        x = .on.flip()

        y = select x {
            case .on = 1
            case .off = .on
        }

        typeOf x
        typeOf y
    }
}